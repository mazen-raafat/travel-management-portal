<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="" />
	<meta name="author" content="" />

	<title>User - Ticket Details</title>

	<!-- Bootstrap Core CSS -->
	<link href="../../../template/vendor/bootstrap/css/bootstrap.min.css"
		rel="stylesheet" />

	<!-- MetisMenu CSS -->
	<link href="../../../template/vendor/metisMenu/metisMenu.min.css"
		rel="stylesheet" />

	<!-- DataTables CSS -->
	<link
		href="../../../template/vendor/datatables-plugins/dataTables.bootstrap.css"
		rel="stylesheet" />

	<!-- DataTables Responsive CSS -->
	<link
		href="../../../template/vendor/datatables-responsive/dataTables.responsive.css"
		rel="stylesheet" />

	<!-- Custom CSS -->
	<link href="../../../template/dist/css/sb-admin-2.css" rel="stylesheet" />

	<!-- Custom Fonts -->
	<link
		href="../../../template/vendor/font-awesome/css/font-awesome.min.css"
		rel="stylesheet" type="text/css" />

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</h:head>

<h:body>

	<div id="wrapper" style="min-height: 670px;">

		<p:panel id="container">

			<div class="panel panel-primary">
				<div class="panel-heading">
					<div class="row">
						<div class="col-lg-12" dir="rtl">
							<h5>Welcome, #{loginUser.user.email}</h5>
							&nbsp;



							<h:form dir="rtl">

								<h:commandButton action="#{loginUser.logout}" value="Logout"
									class="btn btn-danger" /> &nbsp;
							<h:commandButton
									action="/pages/user/protected/my-tickets.xhtml?faces-redirect=true"
									value="My Tickets" class="btn btn-default" />&nbsp;
							<h:commandButton
									action="/pages/user/protected/offers.xhtml?faces-redirect=true"
									value="Offers" class="btn btn-default" />&nbsp;


						</h:form>



						</div>
						<!-- /.col-lg-12 -->
					</div>

				</div>
				<div class="panel-body">
					<div class="row">
						<div class="col-lg-12">
							<h1>Gamma Arilines Portal</h1>
						</div>
						<!-- /.col-lg-12 -->
					</div>
				</div>
				<div class="panel-footer">

					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header">Ticket Details</h1>
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<!-- /.row -->
					<div class="row">
						<div class="col-lg-12">
							<div class="panel panel-default">
								<div class="panel-heading">User - Ticket Details</div>
								<!-- /.panel-heading -->
								<div id="content" class="panel-body">



									<h:form id="form" role="form">

										<p:growl id="messages"></p:growl>

										<fieldset>


											<div class="form-group">
												<p class="form-control-static">From
													#{purchasedTicketDetails.buyTicketResponseObject.details.route.from}</p>

											</div>

											<div class="form-group">
												<p class="form-control-static">To
													#{purchasedTicketDetails.buyTicketResponseObject.details.route.to}</p>

											</div>

											<div class="form-group">
												<p class="form-control-static">Price
													#{purchasedTicketDetails.buyTicketResponseObject.details.price.amount}</p>

											</div>

											<div class="form-group">
												<p class="form-control-static">Currency
													#{purchasedTicketDetails.buyTicketResponseObject.details.price.currency}</p>

											</div>
											<div class="form-group">
												<p class="form-control-static">Amount
													#{purchasedTicketDetails.buyTicketResponseObject.amount}</p>

											</div>


										</fieldset>

										<p:commandButton value="Send Email" id="sendEmail"
											action="#{purchasedTicketDetails.sendEmail}"
											update="messages" class="btn btn-lg btn-success btn-block"></p:commandButton>

										<a class="btn btn-lg btn-success btn-block" id="exportPDF"
											href="javascript:demoFromHTML()">Export as PDF</a>

									</h:form>


								</div>
								<!-- /.panel-body -->
							</div>
							<!-- /.panel -->
						</div>
						<!-- /.col-lg-12 -->
					</div>


				</div>

			</div>

		</p:panel>

		<p:blockUI id="blockUiId" block="container"
			trigger="form:sendEmail" widgetVar="block">
			<p:graphicImage value="/resources/images/giphy.gif" width="100px"
				height="100px" />
		</p:blockUI>



	</div>
	<!-- /#wrapper -->

	<!-- jQuery -->
	<script src="../../../template/vendor/jquery/jquery.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="../../../template/vendor/bootstrap/js/bootstrap.min.js"></script>

	<!-- Metis Menu Plugin JavaScript -->
	<script src="../../../template/vendor/metisMenu/metisMenu.min.js"></script>

	<!-- DataTables JavaScript -->
	<script
		src="../../../template/vendor/datatables/js/jquery.dataTables.min.js"></script>
	<script
		src="../../../template/vendor/datatables-plugins/dataTables.bootstrap.min.js"></script>
	<script
		src="../../../template/vendor/datatables-responsive/dataTables.responsive.js"></script>

	<!-- Custom Theme JavaScript -->
	<script src="../../../template/dist/js/sb-admin-2.js"></script>

	<!-- Page-Level Demo Scripts - Tables - Use for reference -->
	<script>
		$(document).ready(function() {
			$('#dataTables-example').DataTable({
				responsive : true
			});
		});
	</script>


	<!-- jsPDF -->

	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.3/jspdf.debug.js"></script>


	<script>
		function demoFromHTML() {
			var pdf = new jsPDF('p', 'pt', 'letter');
			// source can be HTML-formatted string, or a reference
			// to an actual DOM element from which the text will be scraped.
			source = $('#content')[0];

			// we support special element handlers. Register them with jQuery-style 
			// ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
			// There is no support for any other type of selectors 
			// (class, of compound) at this time.
			specialElementHandlers = {
				// element with id of "bypass" - jQuery style selector
				'#bypassme' : function(element, renderer) {
					// true = "handled elsewhere, bypass text extraction"
					return true
				}
			};
			margins = {
				top : 80,
				bottom : 60,
				left : 40,
				width : 522
			};
			// all coords and widths are in jsPDF instance's declared units
			// 'inches' in this case
			pdf.fromHTML(source, // HTML string or DOM elem ref.
			margins.left, // x coord
			margins.top, { // y coord
				'width' : margins.width, // max width of content on PDF
				'elementHandlers' : specialElementHandlers
			},

			function(dispose) {
				// dispose: object with X, Y of the last line add to the PDF 
				//          this allow the insertion of new lines after html
				pdf.save('Ticket.pdf');
			}, margins);
		}
	</script>

	<!-- /jsPDF -->

</h:body>

</html>
